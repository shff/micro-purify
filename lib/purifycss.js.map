{"version":3,"file":"purifycss.js","sources":["../src/utils/parse.js","../src/utils/stringify.js","../src/CssTreeWalker.js","../src/utils/FileUtil.js","../src/utils/ExtractWordsUtil.js","../src/SelectorFilter.js","../src/purifycss.js","../src/utils/PrintUtil.js"],"sourcesContent":["/*\n\nCode extracted from https://github.com/reworkcss/css\n\n\n\n(The MIT License)\n\nCopyright (c) 2012 TJ Holowaychuk <tj@vision-media.ca>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the 'Software'), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n// http://www.w3.org/TR/CSS21/grammar.html\n// https://github.com/visionmedia/css-parse/pull/49#issuecomment-30088027\nvar commentre = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\n\nexport default function(css, options) {\n  options = options || {};\n\n  /**\n   * Positional.\n   */\n\n  var lineno = 1;\n  var column = 1;\n\n  /**\n   * Update lineno and column based on `str`.\n   */\n\n  function updatePosition(str) {\n    var lines = str.match(/\\n/g);\n    if (lines) lineno += lines.length;\n    var i = str.lastIndexOf(\"\\n\");\n    column = ~i ? str.length - i : column + str.length;\n  }\n\n  /**\n   * Mark position and patch `node.position`.\n   */\n\n  function position() {\n    var start = { line: lineno, column: column };\n    return function(node) {\n      node.position = new Position(start);\n      whitespace();\n      return node;\n    };\n  }\n\n  /**\n   * Store position information for a node\n   */\n\n  function Position(start) {\n    this.start = start;\n    this.end = { line: lineno, column: column };\n    this.source = options.source;\n  }\n\n  /**\n   * Non-enumerable source string\n   */\n\n  Position.prototype.content = css;\n\n  /**\n   * Error `msg`.\n   */\n\n  var errorsList = [];\n\n  function error(msg) {\n    var err = new Error(\n      options.source + \":\" + lineno + \":\" + column + \": \" + msg\n    );\n    err.reason = msg;\n    err.filename = options.source;\n    err.line = lineno;\n    err.column = column;\n    err.source = css;\n\n    if (options.silent) {\n      errorsList.push(err);\n    } else {\n      throw err;\n    }\n  }\n\n  /**\n   * Parse stylesheet.\n   */\n\n  function stylesheet() {\n    var rulesList = rules();\n\n    return {\n      type: \"stylesheet\",\n      stylesheet: {\n        rules: rulesList,\n        parsingErrors: errorsList\n      }\n    };\n  }\n\n  /**\n   * Opening brace.\n   */\n\n  function open() {\n    return match(/^{\\s*/);\n  }\n\n  /**\n   * Closing brace.\n   */\n\n  function close() {\n    return match(/^}/);\n  }\n\n  /**\n   * Parse ruleset.\n   */\n\n  function rules() {\n    var node;\n    var rules = [];\n    whitespace();\n    comments(rules);\n    while (css.length && css.charAt(0) != \"}\" && (node = atrule() || rule())) {\n      if (node !== false) {\n        rules.push(node);\n        comments(rules);\n      }\n    }\n    return rules;\n  }\n\n  /**\n   * Match `re` and return captures.\n   */\n\n  function match(re) {\n    var m = re.exec(css);\n    if (!m) return;\n    var str = m[0];\n    updatePosition(str);\n    css = css.slice(str.length);\n    return m;\n  }\n\n  /**\n   * Parse whitespace.\n   */\n\n  function whitespace() {\n    match(/^\\s*/);\n  }\n\n  /**\n   * Parse comments;\n   */\n\n  function comments(rules) {\n    var c;\n    rules = rules || [];\n    while ((c = comment())) {\n      if (c !== false) {\n        rules.push(c);\n      }\n    }\n    return rules;\n  }\n\n  /**\n   * Parse comment.\n   */\n\n  function comment() {\n    var pos = position();\n    if (\"/\" != css.charAt(0) || \"*\" != css.charAt(1)) return;\n\n    var i = 2;\n    while (\n      \"\" != css.charAt(i) &&\n      (\"*\" != css.charAt(i) || \"/\" != css.charAt(i + 1))\n    )\n      ++i;\n    i += 2;\n\n    if (\"\" === css.charAt(i - 1)) {\n      return error(\"End of comment missing\");\n    }\n\n    var str = css.slice(2, i - 2);\n    column += 2;\n    updatePosition(str);\n    css = css.slice(i);\n    column += 2;\n\n    return pos({\n      type: \"comment\",\n      comment: str\n    });\n  }\n\n  /**\n   * Parse selector.\n   */\n\n  function selector() {\n    var m = match(/^([^{]+)/);\n    if (!m) return;\n    /* @fix Remove all comments from selectors\n     * http://ostermiller.org/findcomment.html */\n    return trim(m[0])\n      .replace(/\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*\\/+/g, \"\")\n      .replace(/\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'/g, function(m) {\n        return m.replace(/,/g, \"\\u200C\");\n      })\n      .split(/\\s*(?![^(]*\\)),\\s*/)\n      .map(function(s) {\n        return s.replace(/\\u200C/g, \",\");\n      });\n  }\n\n  /**\n   * Parse declaration.\n   */\n\n  function declaration() {\n    var pos = position();\n\n    // prop\n    var prop = match(/^(\\*?[-#\\/\\*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/);\n    if (!prop) return;\n    prop = trim(prop[0]);\n\n    // :\n    if (!match(/^:\\s*/)) return error(\"property missing ':'\");\n\n    // val\n    var val = match(/^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/);\n\n    var ret = pos({\n      type: \"declaration\",\n      property: prop.replace(commentre, \"\"),\n      value: val ? trim(val[0]).replace(commentre, \"\") : \"\"\n    });\n\n    // ;\n    match(/^[;\\s]*/);\n\n    return ret;\n  }\n\n  /**\n   * Parse declarations.\n   */\n\n  function declarations() {\n    var decls = [];\n\n    if (!open()) return error(\"missing '{'\");\n    comments(decls);\n\n    // declarations\n    var decl;\n    while ((decl = declaration())) {\n      if (decl !== false) {\n        decls.push(decl);\n        comments(decls);\n      }\n    }\n\n    if (!close()) return error(\"missing '}'\");\n    return decls;\n  }\n\n  /**\n   * Parse keyframe.\n   */\n\n  function keyframe() {\n    var m;\n    var vals = [];\n    var pos = position();\n\n    while ((m = match(/^((\\d+\\.\\d+|\\.\\d+|\\d+)%?|[a-z]+)\\s*/))) {\n      vals.push(m[1]);\n      match(/^,\\s*/);\n    }\n\n    if (!vals.length) return;\n\n    return pos({\n      type: \"keyframe\",\n      values: vals,\n      declarations: declarations()\n    });\n  }\n\n  /**\n   * Parse keyframes.\n   */\n\n  function atkeyframes() {\n    var pos = position();\n    var m = match(/^@([-\\w]+)?keyframes\\s*/);\n\n    if (!m) return;\n    var vendor = m[1];\n\n    // identifier\n    var m = match(/^([-\\w]+)\\s*/);\n    if (!m) return error(\"@keyframes missing name\");\n    var name = m[1];\n\n    if (!open()) return error(\"@keyframes missing '{'\");\n\n    var frame;\n    var frames = comments();\n    while ((frame = keyframe())) {\n      frames.push(frame);\n      frames = frames.concat(comments());\n    }\n\n    if (!close()) return error(\"@keyframes missing '}'\");\n\n    return pos({\n      type: \"keyframes\",\n      name: name,\n      vendor: vendor,\n      keyframes: frames\n    });\n  }\n\n  /**\n   * Parse supports.\n   */\n\n  function atsupports() {\n    var pos = position();\n    var m = match(/^@supports *([^{]+)/);\n\n    if (!m) return;\n    var supports = trim(m[1]);\n\n    if (!open()) return error(\"@supports missing '{'\");\n\n    var style = comments().concat(rules());\n\n    if (!close()) return error(\"@supports missing '}'\");\n\n    return pos({\n      type: \"supports\",\n      supports: supports,\n      rules: style\n    });\n  }\n\n  /**\n   * Parse host.\n   */\n\n  function athost() {\n    var pos = position();\n    var m = match(/^@host\\s*/);\n\n    if (!m) return;\n\n    if (!open()) return error(\"@host missing '{'\");\n\n    var style = comments().concat(rules());\n\n    if (!close()) return error(\"@host missing '}'\");\n\n    return pos({\n      type: \"host\",\n      rules: style\n    });\n  }\n\n  /**\n   * Parse media.\n   */\n\n  function atmedia() {\n    var pos = position();\n    var m = match(/^@media *([^{]+)/);\n\n    if (!m) return;\n    var media = trim(m[1]);\n\n    if (!open()) return error(\"@media missing '{'\");\n\n    var style = comments().concat(rules());\n\n    if (!close()) return error(\"@media missing '}'\");\n\n    return pos({\n      type: \"media\",\n      media: media,\n      rules: style\n    });\n  }\n\n  /**\n   * Parse custom-media.\n   */\n\n  function atcustommedia() {\n    var pos = position();\n    var m = match(/^@custom-media\\s+(--[^\\s]+)\\s*([^{;]+);/);\n    if (!m) return;\n\n    return pos({\n      type: \"custom-media\",\n      name: trim(m[1]),\n      media: trim(m[2])\n    });\n  }\n\n  /**\n   * Parse paged media.\n   */\n\n  function atpage() {\n    var pos = position();\n    var m = match(/^@page */);\n    if (!m) return;\n\n    var sel = selector() || [];\n\n    if (!open()) return error(\"@page missing '{'\");\n    var decls = comments();\n\n    // declarations\n    var decl;\n    while ((decl = declaration())) {\n      decls.push(decl);\n      decls = decls.concat(comments());\n    }\n\n    if (!close()) return error(\"@page missing '}'\");\n\n    return pos({\n      type: \"page\",\n      selectors: sel,\n      declarations: decls\n    });\n  }\n\n  /**\n   * Parse document.\n   */\n\n  function atdocument() {\n    var pos = position();\n    var m = match(/^@([-\\w]+)?document *([^{]+)/);\n    if (!m) return;\n\n    var vendor = trim(m[1]);\n    var doc = trim(m[2]);\n\n    if (!open()) return error(\"@document missing '{'\");\n\n    var style = comments().concat(rules());\n\n    if (!close()) return error(\"@document missing '}'\");\n\n    return pos({\n      type: \"document\",\n      document: doc,\n      vendor: vendor,\n      rules: style\n    });\n  }\n\n  /**\n   * Parse font-face.\n   */\n\n  function atfontface() {\n    var pos = position();\n    var m = match(/^@font-face\\s*/);\n    if (!m) return;\n\n    if (!open()) return error(\"@font-face missing '{'\");\n    var decls = comments();\n\n    // declarations\n    var decl;\n    while ((decl = declaration())) {\n      decls.push(decl);\n      decls = decls.concat(comments());\n    }\n\n    if (!close()) return error(\"@font-face missing '}'\");\n\n    return pos({\n      type: \"font-face\",\n      declarations: decls\n    });\n  }\n\n  /**\n   * Parse import\n   */\n\n  var atimport = _compileAtrule(\"import\");\n\n  /**\n   * Parse charset\n   */\n\n  var atcharset = _compileAtrule(\"charset\");\n\n  /**\n   * Parse namespace\n   */\n\n  var atnamespace = _compileAtrule(\"namespace\");\n\n  /**\n   * Parse non-block at-rules\n   */\n\n  function _compileAtrule(name) {\n    var re = new RegExp(\"^@\" + name + \"\\\\s*([^;]+);\");\n    return function() {\n      var pos = position();\n      var m = match(re);\n      if (!m) return;\n      var ret = { type: name };\n      ret[name] = m[1].trim();\n      return pos(ret);\n    };\n  }\n\n  /**\n   * Parse at rule.\n   */\n\n  function atrule() {\n    if (css[0] != \"@\") return;\n\n    return (\n      atkeyframes() ||\n      atmedia() ||\n      atcustommedia() ||\n      atsupports() ||\n      atimport() ||\n      atcharset() ||\n      atnamespace() ||\n      atdocument() ||\n      atpage() ||\n      athost() ||\n      atfontface()\n    );\n  }\n\n  /**\n   * Parse rule.\n   */\n\n  function rule() {\n    var pos = position();\n    var sel = selector();\n\n    if (!sel) return error(\"selector missing\");\n    comments();\n\n    return pos({\n      type: \"rule\",\n      selectors: sel,\n      declarations: declarations()\n    });\n  }\n\n  return addParent(stylesheet());\n}\n\n/**\n * Trim `str`.\n */\n\nfunction trim(str) {\n  return str ? str.replace(/^\\s+|\\s+$/g, \"\") : \"\";\n}\n\n/**\n * Adds non-enumerable parent node reference to each node.\n */\n\nfunction addParent(obj, parent) {\n  var isNode = obj && typeof obj.type === \"string\";\n  var childParent = isNode ? obj : parent;\n\n  for (var k in obj) {\n    var value = obj[k];\n    if (Array.isArray(value)) {\n      value.forEach(function(v) {\n        addParent(v, childParent);\n      });\n    } else if (value && typeof value === \"object\") {\n      addParent(value, childParent);\n    }\n  }\n\n  if (isNode) {\n    Object.defineProperty(obj, \"parent\", {\n      configurable: true,\n      writable: true,\n      enumerable: false,\n      value: parent || null\n    });\n  }\n\n  return obj;\n}\n","/*\n\nCode extracted from https://github.com/reworkcss/css\n\n\n\n(The MIT License)\n\nCopyright (c) 2012 TJ Holowaychuk <tj@vision-media.ca>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the 'Software'), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n/**\n * Expose compiler.\n */\n\nexport default (node, options) => new Compiler(options).compile(node);\n\n/**\n * Initialize a new `Compiler`.\n */\n\nfunction Compiler(options) {\n  this.options = options || {};\n  this.indentation = options.indent;\n}\n\n/**\n * Emit `str`\n */\n\nCompiler.prototype.emit = function(str) {\n  return str;\n};\n\n/**\n * Visit `node`.\n */\n\nCompiler.prototype.visit = function(node) {\n  return this[node.type](node);\n};\n\n/**\n * Map visit over array of `nodes`, optionally using a `delim`\n */\n\nCompiler.prototype.mapVisit = function(nodes, delim) {\n  var buf = \"\";\n  delim = delim || \"\";\n\n  for (var i = 0, length = nodes.length; i < length; i++) {\n    buf += this.visit(nodes[i]);\n    if (delim && i < length - 1) buf += this.emit(delim);\n  }\n\n  return buf;\n};\n\n/**\n * Compile `node`.\n */\n\nCompiler.prototype.compile = function(node) {\n  return this.stylesheet(node);\n};\n\n/**\n * Visit stylesheet node.\n */\n\nCompiler.prototype.stylesheet = function(node) {\n  return this.mapVisit(node.stylesheet.rules, \"\\n\\n\");\n};\n\n/**\n * Visit comment node.\n */\n\nCompiler.prototype.comment = function(node) {\n  return this.emit(this.indent() + \"/*\" + node.comment + \"*/\", node.position);\n};\n\n/**\n * Visit import node.\n */\n\nCompiler.prototype.import = function(node) {\n  return this.emit(\"@import \" + node.import + \";\", node.position);\n};\n\n/**\n * Visit media node.\n */\n\nCompiler.prototype.media = function(node) {\n  return (\n    this.emit(\"@media \" + node.media, node.position) +\n    this.emit(\" {\\n\" + this.indent(1)) +\n    this.mapVisit(node.rules, \"\\n\\n\") +\n    this.emit(this.indent(-1) + \"\\n}\")\n  );\n};\n\n/**\n * Visit document node.\n */\n\nCompiler.prototype.document = function(node) {\n  var doc = \"@\" + (node.vendor || \"\") + \"document \" + node.document;\n\n  return (\n    this.emit(doc, node.position) +\n    this.emit(\" \" + \" {\\n\" + this.indent(1)) +\n    this.mapVisit(node.rules, \"\\n\\n\") +\n    this.emit(this.indent(-1) + \"\\n}\")\n  );\n};\n\n/**\n * Visit charset node.\n */\n\nCompiler.prototype.charset = function(node) {\n  return this.emit(\"@charset \" + node.charset + \";\", node.position);\n};\n\n/**\n * Visit namespace node.\n */\n\nCompiler.prototype.namespace = function(node) {\n  return this.emit(\"@namespace \" + node.namespace + \";\", node.position);\n};\n\n/**\n * Visit supports node.\n */\n\nCompiler.prototype.supports = function(node) {\n  return (\n    this.emit(\"@supports \" + node.supports, node.position) +\n    this.emit(\" {\\n\" + this.indent(1)) +\n    this.mapVisit(node.rules, \"\\n\\n\") +\n    this.emit(this.indent(-1) + \"\\n}\")\n  );\n};\n\n/**\n * Visit keyframes node.\n */\n\nCompiler.prototype.keyframes = function(node) {\n  return (\n    this.emit(\n      \"@\" + (node.vendor || \"\") + \"keyframes \" + node.name,\n      node.position\n    ) +\n    this.emit(\" {\\n\" + this.indent(1)) +\n    this.mapVisit(node.keyframes, \"\\n\") +\n    this.emit(this.indent(-1) + \"}\")\n  );\n};\n\n/**\n * Visit keyframe node.\n */\n\nCompiler.prototype.keyframe = function(node) {\n  var decls = node.declarations;\n\n  return (\n    this.emit(this.indent()) +\n    this.emit(node.values.join(\", \"), node.position) +\n    this.emit(\" {\\n\" + this.indent(1)) +\n    this.mapVisit(decls, \"\\n\") +\n    this.emit(this.indent(-1) + \"\\n\" + this.indent() + \"}\\n\")\n  );\n};\n\n/**\n * Visit page node.\n */\n\nCompiler.prototype.page = function(node) {\n  var sel = node.selectors.length ? node.selectors.join(\", \") + \" \" : \"\";\n\n  return (\n    this.emit(\"@page \" + sel, node.position) +\n    this.emit(\"{\\n\") +\n    this.emit(this.indent(1)) +\n    this.mapVisit(node.declarations, \"\\n\") +\n    this.emit(this.indent(-1)) +\n    this.emit(\"\\n}\")\n  );\n};\n\n/**\n * Visit font-face node.\n */\n\nCompiler.prototype[\"font-face\"] = function(node) {\n  return (\n    this.emit(\"@font-face \", node.position) +\n    this.emit(\"{\\n\") +\n    this.emit(this.indent(1)) +\n    this.mapVisit(node.declarations, \"\\n\") +\n    this.emit(this.indent(-1)) +\n    this.emit(\"\\n}\")\n  );\n};\n\n/**\n * Visit host node.\n */\n\nCompiler.prototype.host = function(node) {\n  return (\n    this.emit(\"@host\", node.position) +\n    this.emit(\" {\\n\" + this.indent(1)) +\n    this.mapVisit(node.rules, \"\\n\\n\") +\n    this.emit(this.indent(-1) + \"\\n}\")\n  );\n};\n\n/**\n * Visit custom-media node.\n */\n\nCompiler.prototype[\"custom-media\"] = function(node) {\n  return this.emit(\n    \"@custom-media \" + node.name + \" \" + node.media + \";\",\n    node.position\n  );\n};\n\n/**\n * Visit rule node.\n */\n\nCompiler.prototype.rule = function(node) {\n  var indent = this.indent();\n  var decls = node.declarations;\n  if (!decls.length) return \"\";\n\n  return (\n    this.emit(\n      node.selectors\n        .map(function(s) {\n          return indent + s;\n        })\n        .join(\",\\n\"),\n      node.position\n    ) +\n    this.emit(\" {\\n\") +\n    this.emit(this.indent(1)) +\n    this.mapVisit(decls, \"\\n\") +\n    this.emit(this.indent(-1)) +\n    this.emit(\"\\n\" + this.indent() + \"}\")\n  );\n};\n\n/**\n * Visit declaration node.\n */\n\nCompiler.prototype.declaration = function(node) {\n  return (\n    this.emit(this.indent()) +\n    this.emit(node.property + \": \" + node.value, node.position) +\n    this.emit(\";\")\n  );\n};\n\n/**\n * Increase, decrease or return current indentation.\n */\n\nCompiler.prototype.indent = function(level) {\n  this.level = this.level || 1;\n\n  if (null != level) {\n    this.level += level;\n    return \"\";\n  }\n\n  return Array(this.level).join(this.indentation || \"  \");\n};\n","import parse from \"./utils/parse\";\nimport stringify from \"./utils/stringify\";\n\nconst RULE_TYPE = \"rule\";\nconst MEDIA_TYPE = \"media\";\n\nclass CssTreeWalker {\n  constructor(code, plugins) {\n    this.startingSource = code;\n    this.ast = null;\n    this.plugins = plugins;\n  }\n\n  beginReading() {\n    this.ast = parse(this.startingSource);\n    this.readPlugin(this.ast.stylesheet);\n  }\n\n  readPlugin(tree) {\n    this.readRules(tree.rules);\n    this.removeEmptyRules(tree.rules);\n  }\n\n  readRules(rules) {\n    for (let rule of rules) {\n      if (rule.type === RULE_TYPE) {\n        this.plugins.forEach(plugin => {\n          plugin.parseRule(rule.selectors, rule);\n        });\n      }\n      if (rule.type === MEDIA_TYPE) {\n        this.readRules(rule.rules);\n      }\n    }\n  }\n\n  removeEmptyRules(rules) {\n    let emptyRules = [];\n\n    for (let rule of rules) {\n      const ruleType = rule.type;\n\n      if (ruleType === RULE_TYPE && rule.selectors.length === 0) {\n        emptyRules.push(rule);\n      }\n      if (ruleType === MEDIA_TYPE) {\n        this.removeEmptyRules(rule.rules);\n        if (rule.rules.length === 0) {\n          emptyRules.push(rule);\n        }\n      }\n    }\n\n    emptyRules.forEach(emptyRule => {\n      const index = rules.indexOf(emptyRule);\n      rules.splice(index, 1);\n    });\n  }\n\n  toString() {\n    if (this.ast) {\n      return stringify(this.ast, {}).replace(/,\\n/g, \",\");\n    }\n    return \"\";\n  }\n}\n\nexport default CssTreeWalker;\n","const fs = require(\"fs\");\nimport glob from \"glob\";\n\nexport const concatFiles = (files, options) =>\n  files.reduce((total, file) => {\n    let code = \"\";\n    try {\n      code = fs.readFileSync(file, \"utf8\").toLowerCase();\n    } catch (e) {\n      console.warn(e.message);\n    }\n    return `${total}${code} `;\n  }, \"\");\n\nexport const getFilesFromPatternArray = fileArray => {\n  let sourceFiles = {};\n  for (let string of fileArray) {\n    try {\n      // See if string is a filepath, not a file pattern.\n      fs.statSync(string);\n      sourceFiles[string] = true;\n    } catch (e) {\n      const files = glob.sync(string);\n      files.forEach(file => {\n        sourceFiles[file] = true;\n      });\n    }\n  }\n  return Object.keys(sourceFiles);\n};\n\nexport const filesToSource = (files, type) => {\n  const isContent = type === \"content\";\n  if (Array.isArray(files)) {\n    files = getFilesFromPatternArray(files);\n    return concatFiles(files, {});\n  }\n  // 'files' is already a source string.\n  return isContent ? files.toLowerCase() : files;\n};\n\nexport default {\n  concatFiles,\n  filesToSource,\n  getFilesFromPatternArray\n};\n","const addWord = (words, word) => {\n  if (word) words.push(word);\n};\n\nexport const getAllWordsInContent = content => {\n  let used = {\n    // Always include html and body.\n    html: true,\n    body: true\n  };\n  const words = content.split(/[^a-z]/g);\n  for (let word of words) {\n    used[word] = true;\n  }\n  return used;\n};\n\nexport const getAllWordsInSelector = selector => {\n  // Remove attr selectors. \"a[href...]\"\" will become \"a\".\n  selector = selector.replace(/\\[(.+?)\\]/g, \"\").toLowerCase();\n  // If complex attr selector (has a bracket in it) just leave\n  // the selector in. ¯\\_(ツ)_/¯\n  if (selector.includes(\"[\") || selector.includes(\"]\")) {\n    return [];\n  }\n  let skipNextWord = false,\n    word = \"\",\n    words = [];\n\n  for (let letter of selector) {\n    if (skipNextWord && !/[ #.]/.test(letter)) continue;\n    // If pseudoclass or universal selector, skip the next word\n    if (/[:*]/.test(letter)) {\n      addWord(words, word);\n      word = \"\";\n      skipNextWord = true;\n      continue;\n    }\n    if (/[a-z]/.test(letter)) {\n      word += letter;\n    } else {\n      addWord(words, word);\n      word = \"\";\n      skipNextWord = false;\n    }\n  }\n\n  addWord(words, word);\n  return words;\n};\n","import { getAllWordsInSelector } from \"./utils/ExtractWordsUtil\";\n\nconst isWildcardWhitelistSelector = selector => {\n  return selector[0] === \"*\" && selector[selector.length - 1] === \"*\";\n};\n\nconst hasWhitelistMatch = (selector, whitelist) => {\n  for (let el of whitelist) {\n    if (selector.includes(el)) return true;\n  }\n  return false;\n};\n\nclass SelectorFilter {\n  constructor(contentWords, whitelist) {\n    this.contentWords = contentWords;\n    this.rejectedSelectors = [];\n    this.wildcardWhitelist = [];\n    this.parseWhitelist(whitelist);\n  }\n\n  parseWhitelist(whitelist) {\n    whitelist.forEach(whitelistSelector => {\n      whitelistSelector = whitelistSelector.toLowerCase();\n\n      if (isWildcardWhitelistSelector(whitelistSelector)) {\n        // If '*button*' then push 'button' onto list.\n        this.wildcardWhitelist.push(\n          whitelistSelector.substr(1, whitelistSelector.length - 2)\n        );\n      } else {\n        getAllWordsInSelector(whitelistSelector).forEach(word => {\n          this.contentWords[word] = true;\n        });\n      }\n    });\n  }\n\n  parseRule(selectors, rule) {\n    rule.selectors = this.filterSelectors(selectors);\n  }\n\n  filterSelectors(selectors) {\n    let contentWords = this.contentWords,\n      rejectedSelectors = this.rejectedSelectors,\n      wildcardWhitelist = this.wildcardWhitelist,\n      usedSelectors = [];\n\n    selectors.forEach(selector => {\n      if (hasWhitelistMatch(selector, wildcardWhitelist)) {\n        usedSelectors.push(selector);\n        return;\n      }\n      let words = getAllWordsInSelector(selector),\n        usedWords = words.filter(word => contentWords[word]);\n\n      if (usedWords.length === words.length) {\n        usedSelectors.push(selector);\n      } else {\n        rejectedSelectors.push(selector);\n      }\n    });\n\n    return usedSelectors;\n  }\n}\n\nexport default SelectorFilter;\n","const fs = require(\"fs\");\nimport CssTreeWalker from \"./CssTreeWalker\";\nimport FileUtil from \"./utils/FileUtil\";\nimport PrintUtil from \"./utils/PrintUtil\";\nimport SelectorFilter from \"./SelectorFilter\";\nimport { getAllWordsInContent } from \"./utils/ExtractWordsUtil\";\n\nconst OPTIONS = {\n  output: false,\n  info: false,\n  rejected: false,\n  whitelist: []\n};\n\nconst getOptions = (options = {}) => {\n  let opt = {};\n  for (let option in OPTIONS) {\n    opt[option] = options[option] || OPTIONS[option];\n  }\n  return opt;\n};\n\nconst purify = (searchThrough, css, options, callback) => {\n  if (typeof options === \"function\") {\n    callback = options;\n    options = {};\n  }\n  options = getOptions(options);\n  let cssString = FileUtil.filesToSource(css, \"css\"),\n    content = FileUtil.filesToSource(searchThrough, \"content\");\n  let wordsInContent = getAllWordsInContent(content),\n    selectorFilter = new SelectorFilter(wordsInContent, options.whitelist),\n    tree = new CssTreeWalker(cssString, [selectorFilter]);\n  tree.beginReading();\n  let source = tree.toString();\n\n  // Option info = true\n  if (options.info) {\n    PrintUtil.printInfo(source.length);\n  }\n\n  // Option rejected = true\n  if (options.rejected && selectorFilter.rejectedSelectors.length) {\n    PrintUtil.printRejected(selectorFilter.rejectedSelectors);\n  }\n\n  if (options.output) {\n    fs.writeFile(options.output, source, err => {\n      if (err) return err;\n    });\n  } else {\n    return callback ? callback(source) : source;\n  }\n};\n\nexport default purify;\n","let startTime;\nlet beginningLength;\n\nconst printInfo = endingLength => {\n  const sizeReduction = (\n    ((beginningLength - endingLength) / beginningLength) *\n    100\n  ).toFixed(1);\n  console.log(`PurifyCSS has reduced the file size by ~ ${sizeReduction}%`);\n};\n\nconst printRejected = rejectedTwigs => {\n  console.log(\n    `PurifyCSS - Rejected selectors:\\n    ${rejectedTwigs.join(\"\\n    |\\t\")}`\n  );\n};\n\nconst startLog = cssLength => {\n  startTime = new Date();\n  beginningLength = cssLength;\n};\n\nexport default {\n  printInfo,\n  printRejected,\n  startLog\n};\n"],"names":["commentre","trim","str","replace","Compiler","options","indentation","indent","prototype","emit","visit","node","this","type","mapVisit","nodes","delim","buf","i","length","compile","stylesheet","rules","comment","position","import","media","document","vendor","charset","namespace","supports","keyframes","name","keyframe","decls","declarations","values","join","page","sel","selectors","host","rule","map","s","declaration","property","value","level","Array","const","CssTreeWalker","constructor","code","plugins","startingSource","ast","beginReading","css","lineno","column","updatePosition","lines","match","lastIndexOf","start","line","Position","whitespace","end","source","content","errorsList","error","msg","err","Error","reason","filename","silent","push","open","close","pos","comments","charAt","atrule","selector","re","m","exec","slice","c","split","prop","val","ret","decl","vals","atimport","_compileAtrule","atcharset","atnamespace","RegExp","frame","frames","concat","atkeyframes","style","atmedia","atcustommedia","atsupports","doc","atdocument","atpage","athost","atfontface","addParent","obj","parent","isNode","childParent","k","isArray","forEach","v","Object","defineProperty","configurable","writable","enumerable","parsingErrors","parse","readPlugin","tree","readRules","removeEmptyRules","let","plugin","parseRule","emptyRules","ruleType","emptyRule","index","indexOf","splice","toString","fs","require","files","isContent","reduce","total","file","readFileSync","toLowerCase","e","console","warn","message","concatFiles","fileArray","sourceFiles","string","statSync","glob","sync","keys","getFilesFromPatternArray","addWord","words","word","getAllWordsInSelector","includes","skipNextWord","letter","test","SelectorFilter","contentWords","whitelist","rejectedSelectors","wildcardWhitelist","parseWhitelist","whitelistSelector","substr","filterSelectors","hasWhitelistMatch","usedSelectors","filter","OPTIONS","output","info","rejected","searchThrough","callback","opt","option","getOptions","cssString","FileUtil","wordsInContent","used","html","body","getAllWordsInContent","selectorFilter","sizeReduction","beginningLength","toFixed","log","writeFile"],"mappings":"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"}