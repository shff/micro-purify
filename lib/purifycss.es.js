import r from"glob";var t=/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//g;function e(r,e){e=e||{};var n=1,i=1;function a(r){var t=r.match(/\n/g);t&&(n+=t.length);var e=r.lastIndexOf("\n");i=~e?r.length-e:i+r.length}function s(){var r={line:n,column:i};return function(t){return t.position=new o(r),v(),e.visitor&&e.visitor(t),t}}function o(r){this.start=r,this.end={line:n,column:i},this.source=e.source}o.prototype.content=r;var u=[];function c(t){var a=new Error(e.source+":"+n+":"+i+": "+t);if(a.reason=t,a.filename=e.source,a.line=n,a.column=i,a.source=r,!e.silent)throw a;u.push(a)}function f(){return l(/^{\s*/)}function m(){return l(/^}/)}function p(){var t,e=[];for(v(),h(e);r.length&&"}"!=r.charAt(0)&&(t=E()||z());)!1!==t&&(e.push(t),h(e));return e}function l(t){var e=t.exec(r);if(e){var n=e[0];return a(n),r=r.slice(n.length),e}}function v(){l(/^\s*/)}function h(r){var t;for(r=r||[];t=g();)!1!==t&&r.push(t);return r}function g(){var t=s();if("/"==r.charAt(0)&&"*"==r.charAt(1)){for(var e=2;""!=r.charAt(e)&&("*"!=r.charAt(e)||"/"!=r.charAt(e+1));)++e;if(""===r.charAt((e+=2)-1))return c("End of comment missing");var n=r.slice(2,e-2);return i+=2,a(n),r=r.slice(e),i+=2,t({type:"comment",comment:n})}}function y(){var r=l(/^([^{]+)/);if(r)return r[0].trim().replace(/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(r){return r.replace(/,/g,"â€Œ")}).split(/\s*(?![^(]*\)),\s*/).map(function(r){return r.replace(/\u200C/g,",")})}function d(){var r=s(),e=l(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(e){if(e=e[0].trim(),!l(/^:\s*/))return c("property missing ':'");var n=l(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),i=r({type:"declaration",property:e.replace(t,""),value:n?n[0].trim().replace(t,""):""});return l(/^[;\s]*/),i}}function w(){var r,t=[];if(!f())return c("missing '{'");for(h(t);r=d();)!1!==r&&(t.push(r),h(t));return m()?t:c("missing '}'")}function k(){for(var r,t=[],e=s();r=l(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(r[1]),l(/^,\s*/);if(t.length)return e({type:"keyframe",values:t,declarations:w()})}var A=j("import"),V=j("charset"),b=j("namespace");function j(r){var t=new RegExp("^@"+r+"\\s*([^;]+);");return function(){var e=s(),n=l(t);if(n){var i={type:r};return i[r]=n[1].trim(),e(i)}}}function E(){if("@"==r[0])return function(){var r=s();if(t=l(/^@([-\w]+)?keyframes\s*/)){var t,e=t[1];if(!(t=l(/^([-\w]+)\s*/)))return c("@keyframes missing name");var n,i=t[1];if(!f())return c("@keyframes missing '{'");for(var a=h();n=k();)a.push(n),a=a.concat(h());return m()?r({type:"keyframes",name:i,vendor:e,keyframes:a}):c("@keyframes missing '}'")}}()||function(){var r=s(),t=l(/^@media *([^{]+)/);if(t){var e=t[1].trim();if(!f())return c("@media missing '{'");var n=h().concat(p());return m()?r({type:"media",media:e,rules:n}):c("@media missing '}'")}}()||function(){var r=s(),t=l(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return r({type:"custom-media",name:t[1].trim(),media:t[2].trim()})}()||function(){var r=s(),t=l(/^@supports *([^{]+)/);if(t){var e=t[1].trim();if(!f())return c("@supports missing '{'");var n=h().concat(p());return m()?r({type:"supports",supports:e,rules:n}):c("@supports missing '}'")}}()||A()||V()||b()||function(){var r=s(),t=l(/^@([-\w]+)?document *([^{]+)/);if(t){var e=t[1].trim(),n=t[2].trim();if(!f())return c("@document missing '{'");var i=h().concat(p());return m()?r({type:"document",document:n,vendor:e,rules:i}):c("@document missing '}'")}}()||function(){var r=s();if(l(/^@page */)){var t=y()||[];if(!f())return c("@page missing '{'");for(var e,n=h();e=d();)n.push(e),n=n.concat(h());return m()?r({type:"page",selectors:t,declarations:n}):c("@page missing '}'")}}()||function(){var r=s();if(l(/^@host\s*/)){if(!f())return c("@host missing '{'");var t=h().concat(p());return m()?r({type:"host",rules:t}):c("@host missing '}'")}}()||function(){var r=s();if(l(/^@font-face\s*/)){if(!f())return c("@font-face missing '{'");for(var t,e=h();t=d();)e.push(t),e=e.concat(h());return m()?r({type:"font-face",declarations:e}):c("@font-face missing '}'")}}()}function z(){var r=s(),t=y();return t?(h(),r({type:"rule",selectors:t,declarations:w()})):c("selector missing")}return function r(t,e){var n=t&&"string"==typeof t.type;var i=n?t:e;for(var a in t){var s=t[a];Array.isArray(s)?s.forEach(function(t){r(t,i)}):s&&"object"==typeof s&&r(s,i)}n&&Object.defineProperty(t,"parent",{configurable:!0,writable:!0,enumerable:!1,value:e||null});return t}({type:"stylesheet",stylesheet:{rules:p(),parsingErrors:u}})}var n={compile:function(r){return this.stylesheet(r)},stylesheet:function(r){return this.mapVisit(r.stylesheet.rules)},mapVisit:function(r){var t=this;return r.map(function(r){return t[r.type](r)}).join("")},comment:function(){return""},import:function(r){return"@import "+r.import+";"},media:function(r){var t=r.media,e=this.mapVisit(r.rules);return e.length?"@media "+t+"{"+e+"}":""},document:function(r){var t=r.document,e=r.rules;return e.length?"@"+(r.vendor||"")+"document "+t+"  {"+this.mapVisit(e)+"}":""},charset:function(r){var t=r.charset;return"@charset "+t+";"},namespace:function(r){var t=r.namespace;return"@namespace "+t+";"},supports:function(r){var t=r.supports,e=r.rules;return e.length?"@supports "+t+" {"+this.mapVisit(e)+"}":""},keyframes:function(r){var t=r.vendor;void 0===t&&(t="");var e=r.keyframes;return"@"+t+"keyframes "+r.name+" {"+this.mapVisit(e)+"}"},keyframe:function(r){var t=r.declarations;return r.values.join(", ")+" {"+this.mapVisit(t)+"}"},page:function(r){var t=r.selectors,e=r.declarations;return 0==t.length?"":"@page "+(t.length?t.join(", ")+" ":"")+"{"+this.mapVisit(e)+"}"},"font-face":function(r){return"@font-face {"+this.mapVisit(r.declarations)+"}"},host:function(r){var t=r.rules;return t.length?"@host {"+this.mapVisit(t)+"}":""},"custom-media":function(r){return"@custom-media "+r.name+" "+r.media+";"},rule:function(r){var t=r.declarations,e=r.selectors;return t.length&&e.length?e.join(",")+"{"+this.mapVisit(t)+"}":""},declaration:function(r){return r.property+": "+r.value+";"}},i=require("fs"),a=function(t){return Array.isArray(t)?function(r,t){return r.reduce(function(r,t){var e="";try{e=i.readFileSync(t,"utf8").toLowerCase()}catch(r){console.warn(r.message)}return""+r+e+" "},"")}(t=function(t){for(var e={},n=0,a=t;n<a.length;n+=1){var s=a[n];try{i.statSync(s),e[s]=!0}catch(t){r.sync(s).forEach(function(r){e[r]=!0})}}return Object.keys(e)}(t)):t};export default function(r,t,i){void 0===i&&(i={});var s=["html","body"].concat(i.whitelist||[]),o=a(t),u=a(r).toLowerCase().split(/[^a-z]/g).concat(s),c=e(o,{visitor:function(r){"rule"==r.type&&(r.selectors=r.selectors.filter(function(r){return function(r){return r.replace(/\[(.*?)\]/g,"").replace(/[:*][a-z-_:]+/g,"").toLowerCase().match(/[a-z]+/g)||[]}(r).every(function(r){return u.includes(r)})}))}});return n.compile(c)}
//# sourceMappingURL=purifycss.es.js.map
