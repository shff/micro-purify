import r from"glob";var t=/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//g;function e(r){return r?r.replace(/^\s+|\s+$/g,""):""}function n(r){void 0===r&&(r={}),this.options=r}n.prototype.compile=function(r){return this.stylesheet(r)},n.prototype.stylesheet=function(r){return this.mapVisit(r.stylesheet.rules)},n.prototype.mapVisit=function(r){var t=this;return r.map(function(r){return t[r.type](r)}).join("")},n.prototype.comment=function(){return""},n.prototype.import=function(r){return"@import "+r.import+";"},n.prototype.media=function(r){return"@media "+r.media+"{"+this.mapVisit(r.rules)+"}"},n.prototype.document=function(r){return"@"+(r.vendor||"")+"document "+r.document+"  {"+this.mapVisit(r.rules)+"}"},n.prototype.charset=function(r){return"@charset "+r.charset+";"},n.prototype.namespace=function(r){return"@namespace "+r.namespace+";"},n.prototype.supports=function(r){return"@supports "+r.supports+" {"+this.mapVisit(r.rules)+"}"},n.prototype.keyframes=function(r){return"@"+(r.vendor||"")+"keyframes "+r.name+" {"+this.mapVisit(r.keyframes)+"}"},n.prototype.keyframe=function(r){var t=r.declarations;return r.values.join(", ")+" {"+this.mapVisit(t)+"}"},n.prototype.page=function(r){var t=r.selectors,e=r.declarations;return"@page "+(t.length?t.join(", ")+" ":"")+"{"+this.mapVisit(e)+"}"},n.prototype["font-face"]=function(r){return"@font-face {"+this.mapVisit(r.declarations)+"}"},n.prototype.host=function(r){return"@host {"+this.mapVisit(r.rules)+"}"},n.prototype["custom-media"]=function(r){return"@custom-media "+r.name+" "+r.media+";"},n.prototype.rule=function(r){var t=r.declarations;return t.length?r.selectors.join(",")+"{"+this.mapVisit(t)+"}":""},n.prototype.declaration=function(r){return r.property+": "+r.value+";"};var i=require("fs"),o=function(t){return Array.isArray(t)?function(r,t){return r.reduce(function(r,t){var e="";try{e=i.readFileSync(t,"utf8").toLowerCase()}catch(r){console.warn(r.message)}return""+r+e+" "},"")}(t=function(e){for(var n={},o=0,s=t;o<s.length;o+=1){var a=s[o];try{i.statSync(a),n[a]=!0}catch(t){r.sync(a).forEach(function(r){n[r]=!0})}}return Object.keys(n)}()):t},s=(require("fs"),function(r,t){for(var e=0,n=r;e<n.length;e+=1){var i=n[e];"rule"===i.type?t(i):"media"===i.type&&s(i.rules,t)}}),a=function(r){for(var t=[],e=0,n=r;e<n.length;e+=1){var i=n[e];"rule"===i.type&&0===i.selectors.length?t.push(i):"media"===i.type&&(a(i.rules),0===i.rules.length&&t.push(i))}t.forEach(function(t){return r.splice(r.indexOf(t),1)})};export default function(r,i,u){void 0===u&&(u={});var c,f=u.whitelist||[],p=o(i),m=o(r).toLowerCase().split(/[^a-z]/g).concat(["body","html"]).concat(f),l=function(r,n){n=n||{};var i=1,o=1;function s(r){var t=r.match(/\n/g);t&&(i+=t.length);var e=r.lastIndexOf("\n");o=~e?r.length-e:o+r.length}function a(){var r={line:i,column:o};return function(t){return t.position=new u(r),h(),t}}function u(r){this.start=r,this.end={line:i,column:o},this.source=n.source}u.prototype.content=r;var c=[];function f(t){var e=new Error(n.source+":"+i+":"+o+": "+t);if(e.reason=t,e.filename=n.source,e.line=i,e.column=o,e.source=r,!n.silent)throw e;c.push(e)}function p(){return v(/^{\s*/)}function m(){return v(/^}/)}function l(){var t,e,n,i=[];for(h(),y(i);r.length&&"}"!=r.charAt(0)&&(t=x()||(e=void 0,e=a(),(n=d())?(y(),e({type:"rule",selectors:n,declarations:k()})):f("selector missing")));)!1!==t&&(i.push(t),y(i));return i}function v(t){var e=t.exec(r);if(e){var n=e[0];return s(n),r=r.slice(n.length),e}}function h(){v(/^\s*/)}function y(r){var t;for(r=r||[];t=g();)!1!==t&&r.push(t);return r}function g(){var t=a();if("/"==r.charAt(0)&&"*"==r.charAt(1)){for(var e=2;""!=r.charAt(e)&&("*"!=r.charAt(e)||"/"!=r.charAt(e+1));)++e;if(""===r.charAt((e+=2)-1))return f("End of comment missing");var n=r.slice(2,e-2);return o+=2,s(n),r=r.slice(e),o+=2,t({type:"comment",comment:n})}}function d(){var r=v(/^([^{]+)/);if(r)return e(r[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(r){return r.replace(/,/g,"â€Œ")}).split(/\s*(?![^(]*\)),\s*/).map(function(r){return r.replace(/\u200C/g,",")})}function w(){var r=a(),n=v(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(n){if(n=e(n[0]),!v(/^:\s*/))return f("property missing ':'");var i=v(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),o=r({type:"declaration",property:n.replace(t,""),value:i?e(i[0]).replace(t,""):""});return v(/^[;\s]*/),o}}function k(){var r,t=[];if(!p())return f("missing '{'");for(y(t);r=w();)!1!==r&&(t.push(r),y(t));return m()?t:f("missing '}'")}function A(){for(var r,t=[],e=a();r=v(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(r[1]),v(/^,\s*/);if(t.length)return e({type:"keyframe",values:t,declarations:k()})}var V=E("import"),b=E("charset"),j=E("namespace");function E(r){var t=new RegExp("^@"+r+"\\s*([^;]+);");return function(){var e=a(),n=v(t);if(n){var i={type:r};return i[r]=n[1].trim(),e(i)}}}function x(){if("@"==r[0])return function(){var r=a();if(t=v(/^@([-\w]+)?keyframes\s*/)){var t,e=t[1];if(!(t=v(/^([-\w]+)\s*/)))return f("@keyframes missing name");var n,i=t[1];if(!p())return f("@keyframes missing '{'");for(var o=y();n=A();)o.push(n),o=o.concat(y());return m()?r({type:"keyframes",name:i,vendor:e,keyframes:o}):f("@keyframes missing '}'")}}()||function(){var r=a(),t=v(/^@media *([^{]+)/);if(t){var n=e(t[1]);if(!p())return f("@media missing '{'");var i=y().concat(l());return m()?r({type:"media",media:n,rules:i}):f("@media missing '}'")}}()||function(){var r=a(),t=v(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return r({type:"custom-media",name:e(t[1]),media:e(t[2])})}()||function(){var r=a(),t=v(/^@supports *([^{]+)/);if(t){var n=e(t[1]);if(!p())return f("@supports missing '{'");var i=y().concat(l());return m()?r({type:"supports",supports:n,rules:i}):f("@supports missing '}'")}}()||V()||b()||j()||function(){var r=a(),t=v(/^@([-\w]+)?document *([^{]+)/);if(t){var n=e(t[1]),i=e(t[2]);if(!p())return f("@document missing '{'");var o=y().concat(l());return m()?r({type:"document",document:i,vendor:n,rules:o}):f("@document missing '}'")}}()||function(){var r=a();if(v(/^@page */)){var t=d()||[];if(!p())return f("@page missing '{'");for(var e,n=y();e=w();)n.push(e),n=n.concat(y());return m()?r({type:"page",selectors:t,declarations:n}):f("@page missing '}'")}}()||function(){var r=a();if(v(/^@host\s*/)){if(!p())return f("@host missing '{'");var t=y().concat(l());return m()?r({type:"host",rules:t}):f("@host missing '}'")}}()||function(){var r=a();if(v(/^@font-face\s*/)){if(!p())return f("@font-face missing '{'");for(var t,e=y();t=w();)e.push(t),e=e.concat(y());return m()?r({type:"font-face",declarations:e}):f("@font-face missing '}'")}}()}return function r(t,e){var n=t&&"string"==typeof t.type,i=n?t:e;for(var o in t){var s=t[o];Array.isArray(s)?s.forEach(function(t){r(t,i)}):s&&"object"==typeof s&&r(s,i)}return n&&Object.defineProperty(t,"parent",{configurable:!0,writable:!0,enumerable:!1,value:e||null}),t}({type:"stylesheet",stylesheet:{rules:l(),parsingErrors:c}})}(p),v=l.stylesheet.rules;return s(v,function(r){return r.selectors=(t=m,r.selectors.filter(function(r){var e=function(r){return r.replace(/\[(.*?)\]/g,"").replace(/[:*][a-z-_:]+/g,"").toLowerCase().match(/[a-z]+/g)||[]}(r);return e.filter(function(r){return t.includes(r)}).length===e.length}));var t}),a(v),c=l,new n(void 0).compile(c)}
//# sourceMappingURL=purifycss.es.js.map
