var r,t=(r=require("glob"))&&"object"==typeof r&&"default"in r?r.default:r,e=/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//g;function n(r){return r?r.replace(/^\s+|\s+$/g,""):""}function i(r){void 0===r&&(r={}),this.options=r}i.prototype.compile=function(r){return this.stylesheet(r)},i.prototype.stylesheet=function(r){return this.mapVisit(r.stylesheet.rules)},i.prototype.mapVisit=function(r){var t=this;return r.map(function(r){return t[r.type](r)}).join("")},i.prototype.comment=function(){return""},i.prototype.import=function(r){return"@import "+r.import+";"},i.prototype.media=function(r){return"@media "+r.media+"{"+this.mapVisit(r.rules)+"}"},i.prototype.document=function(r){return"@"+(r.vendor||"")+"document "+r.document+"  {"+this.mapVisit(r.rules)+"}"},i.prototype.charset=function(r){return"@charset "+r.charset+";"},i.prototype.namespace=function(r){return"@namespace "+r.namespace+";"},i.prototype.supports=function(r){return"@supports "+r.supports+" {"+this.mapVisit(r.rules)+"}"},i.prototype.keyframes=function(r){return"@"+(r.vendor||"")+"keyframes "+r.name+" {"+this.mapVisit(r.keyframes)+"}"},i.prototype.keyframe=function(r){var t=r.declarations;return r.values.join(", ")+" {"+this.mapVisit(t)+"}"},i.prototype.page=function(r){var t=r.selectors,e=r.declarations;return"@page "+(t.length?t.join(", ")+" ":"")+"{"+this.mapVisit(e)+"}"},i.prototype["font-face"]=function(r){return"@font-face {"+this.mapVisit(r.declarations)+"}"},i.prototype.host=function(r){return"@host {"+this.mapVisit(r.rules)+"}"},i.prototype["custom-media"]=function(r){return"@custom-media "+r.name+" "+r.media+";"},i.prototype.rule=function(r){var t=r.declarations;return t.length?r.selectors.join(",")+"{"+this.mapVisit(t)+"}":""},i.prototype.declaration=function(r){return r.property+": "+r.value+";"};var o=require("fs"),s=function(r){return Array.isArray(r)?function(r,t){return r.reduce(function(r,t){var e="";try{e=o.readFileSync(t,"utf8").toLowerCase()}catch(r){console.warn(r.message)}return""+r+e+" "},"")}(r=function(e){for(var n={},i=0,s=r;i<s.length;i+=1){var a=s[i];try{o.statSync(a),n[a]=!0}catch(r){t.sync(a).forEach(function(r){n[r]=!0})}}return Object.keys(n)}()):r},a=(require("fs"),function(r,t){for(var e=0,n=r;e<n.length;e+=1){var i=n[e];"rule"===i.type?t(i):"media"===i.type&&a(i.rules,t)}}),u=function(r){for(var t=[],e=0,n=r;e<n.length;e+=1){var i=n[e];"rule"===i.type&&0===i.selectors.length?t.push(i):"media"===i.type&&(u(i.rules),0===i.rules.length&&t.push(i))}t.forEach(function(t){return r.splice(r.indexOf(t),1)})};module.exports=function(r,t,o){void 0===o&&(o={});var c,f=o.whitelist||[],p=s(t),m=s(r).toLowerCase().split(/[^a-z]/g).concat(["body","html"]).concat(f),l=function(r,t){t=t||{};var i=1,o=1;function s(r){var t=r.match(/\n/g);t&&(i+=t.length);var e=r.lastIndexOf("\n");o=~e?r.length-e:o+r.length}function a(){var r={line:i,column:o};return function(t){return t.position=new u(r),h(),t}}function u(r){this.start=r,this.end={line:i,column:o},this.source=t.source}u.prototype.content=r;var c=[];function f(e){var n=new Error(t.source+":"+i+":"+o+": "+e);if(n.reason=e,n.filename=t.source,n.line=i,n.column=o,n.source=r,!t.silent)throw n;c.push(n)}function p(){return v(/^{\s*/)}function m(){return v(/^}/)}function l(){var t,e,n,i=[];for(h(),y(i);r.length&&"}"!=r.charAt(0)&&(t=x()||(e=void 0,e=a(),(n=g())?(y(),e({type:"rule",selectors:n,declarations:k()})):f("selector missing")));)!1!==t&&(i.push(t),y(i));return i}function v(t){var e=t.exec(r);if(e){var n=e[0];return s(n),r=r.slice(n.length),e}}function h(){v(/^\s*/)}function y(r){var t;for(r=r||[];t=d();)!1!==t&&r.push(t);return r}function d(){var t=a();if("/"==r.charAt(0)&&"*"==r.charAt(1)){for(var e=2;""!=r.charAt(e)&&("*"!=r.charAt(e)||"/"!=r.charAt(e+1));)++e;if(""===r.charAt((e+=2)-1))return f("End of comment missing");var n=r.slice(2,e-2);return o+=2,s(n),r=r.slice(e),o+=2,t({type:"comment",comment:n})}}function g(){var r=v(/^([^{]+)/);if(r)return n(r[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(r){return r.replace(/,/g,"â€Œ")}).split(/\s*(?![^(]*\)),\s*/).map(function(r){return r.replace(/\u200C/g,",")})}function w(){var r=a(),t=v(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(t){if(t=n(t[0]),!v(/^:\s*/))return f("property missing ':'");var i=v(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),o=r({type:"declaration",property:t.replace(e,""),value:i?n(i[0]).replace(e,""):""});return v(/^[;\s]*/),o}}function k(){var r,t=[];if(!p())return f("missing '{'");for(y(t);r=w();)!1!==r&&(t.push(r),y(t));return m()?t:f("missing '}'")}function A(){for(var r,t=[],e=a();r=v(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(r[1]),v(/^,\s*/);if(t.length)return e({type:"keyframe",values:t,declarations:k()})}var V=E("import"),b=E("charset"),j=E("namespace");function E(r){var t=new RegExp("^@"+r+"\\s*([^;]+);");return function(){var e=a(),n=v(t);if(n){var i={type:r};return i[r]=n[1].trim(),e(i)}}}function x(){if("@"==r[0])return function(){var r=a();if(t=v(/^@([-\w]+)?keyframes\s*/)){var t,e=t[1];if(!(t=v(/^([-\w]+)\s*/)))return f("@keyframes missing name");var n,i=t[1];if(!p())return f("@keyframes missing '{'");for(var o=y();n=A();)o.push(n),o=o.concat(y());return m()?r({type:"keyframes",name:i,vendor:e,keyframes:o}):f("@keyframes missing '}'")}}()||function(){var r=a(),t=v(/^@media *([^{]+)/);if(t){var e=n(t[1]);if(!p())return f("@media missing '{'");var i=y().concat(l());return m()?r({type:"media",media:e,rules:i}):f("@media missing '}'")}}()||function(){var r=a(),t=v(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return r({type:"custom-media",name:n(t[1]),media:n(t[2])})}()||function(){var r=a(),t=v(/^@supports *([^{]+)/);if(t){var e=n(t[1]);if(!p())return f("@supports missing '{'");var i=y().concat(l());return m()?r({type:"supports",supports:e,rules:i}):f("@supports missing '}'")}}()||V()||b()||j()||function(){var r=a(),t=v(/^@([-\w]+)?document *([^{]+)/);if(t){var e=n(t[1]),i=n(t[2]);if(!p())return f("@document missing '{'");var o=y().concat(l());return m()?r({type:"document",document:i,vendor:e,rules:o}):f("@document missing '}'")}}()||function(){var r=a();if(v(/^@page */)){var t=g()||[];if(!p())return f("@page missing '{'");for(var e,n=y();e=w();)n.push(e),n=n.concat(y());return m()?r({type:"page",selectors:t,declarations:n}):f("@page missing '}'")}}()||function(){var r=a();if(v(/^@host\s*/)){if(!p())return f("@host missing '{'");var t=y().concat(l());return m()?r({type:"host",rules:t}):f("@host missing '}'")}}()||function(){var r=a();if(v(/^@font-face\s*/)){if(!p())return f("@font-face missing '{'");for(var t,e=y();t=w();)e.push(t),e=e.concat(y());return m()?r({type:"font-face",declarations:e}):f("@font-face missing '}'")}}()}return function r(t,e){var n=t&&"string"==typeof t.type,i=n?t:e;for(var o in t){var s=t[o];Array.isArray(s)?s.forEach(function(t){r(t,i)}):s&&"object"==typeof s&&r(s,i)}return n&&Object.defineProperty(t,"parent",{configurable:!0,writable:!0,enumerable:!1,value:e||null}),t}({type:"stylesheet",stylesheet:{rules:l(),parsingErrors:c}})}(p),v=l.stylesheet.rules;return a(v,function(r){return r.selectors=(t=m,r.selectors.filter(function(r){var e=function(r){return r.replace(/\[(.*?)\]/g,"").replace(/[:*][a-z-_:]+/g,"").toLowerCase().match(/[a-z]+/g)||[]}(r);return e.filter(function(r){return t.includes(r)}).length===e.length}));var t}),u(v),c=l,new i(void 0).compile(c)};
//# sourceMappingURL=purifycss.js.map
