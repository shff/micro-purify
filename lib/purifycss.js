var r,e=(r=require("glob"))&&"object"==typeof r&&"default"in r?r.default:r,t=/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//g,n={compile:function(r){return this.stylesheet(r)},stylesheet:function(r){return this.mapVisit(r.stylesheet.rules)},mapVisit:function(r){var e=this;return r.map(function(r){return e[r.type](r)}).join("")},comment:function(){return""},import:function(r){return"@import "+r.import+";"},media:function(r){var e=r.media,t=this.mapVisit(r.rules);return t.length?"@media "+e+"{"+t+"}":""},document:function(r){var e=r.rules;return e.length?"@"+(r.vendor||"")+"document "+r.document+"  {"+this.mapVisit(e)+"}":""},charset:function(r){return"@charset "+r.charset+";"},namespace:function(r){return"@namespace "+r.namespace+";"},supports:function(r){var e=r.rules;return e.length?"@supports "+r.supports+" {"+this.mapVisit(e)+"}":""},keyframes:function(r){var e=r.vendor;return void 0===e&&(e=""),"@"+e+"keyframes "+r.name+" {"+this.mapVisit(r.keyframes)+"}"},keyframe:function(r){var e=r.declarations;return r.values.join(", ")+" {"+this.mapVisit(e)+"}"},page:function(r){var e=r.selectors,t=r.declarations;return 0==e.length?"":"@page "+(e.length?e.join(", ")+" ":"")+"{"+this.mapVisit(t)+"}"},"font-face":function(r){return"@font-face {"+this.mapVisit(r.declarations)+"}"},host:function(r){var e=r.rules;return e.length?"@host {"+this.mapVisit(e)+"}":""},"custom-media":function(r){return"@custom-media "+r.name+" "+r.media+";"},rule:function(r){var e=r.declarations,t=r.selectors;return e.length&&t.length?t.join(",")+"{"+this.mapVisit(e)+"}":""},declaration:function(r){return r.property+": "+r.value+";"}},i=require("fs"),s=function(r){return Array.isArray(r)?function(r,e){return r.reduce(function(r,e){var t="";try{t=i.readFileSync(e,"utf8").toLowerCase()}catch(r){console.warn(r.message)}return""+r+t+" "},"")}(r=function(t){for(var n={},s=0,a=r;s<a.length;s+=1){var u=a[s];try{i.statSync(u),n[u]=!0}catch(r){e.sync(u).forEach(function(r){n[r]=!0})}}return Object.keys(n)}()):r},a=/[^a-z]/g,u=function(r){return r.replace(/\[(.*?)\]/g,"").replace(/[:*][a-z-_:]+/g,"").toLowerCase().match(/[a-z]+/g)||[]},o=function(r,e){for(var t=0,n=r;t<n.length;t+=1){var i=n[t];"rule"===i.type?i.selectors=i.selectors.filter(function(r){return u(r).every(function(r){return e.includes(r)})}):"media"===i.type&&o(i.rules,e)}};module.exports=function(r,e,i){void 0===i&&(i={});var u=["html","body"].concat(i.whitelist||[]),c=s(e),f=s(r).toLowerCase().split(a).concat(u),m=function(r,e){e=e||{};var n=1,i=1;function s(r){var e=r.match(/\n/g);e&&(n+=e.length);var t=r.lastIndexOf("\n");i=~t?r.length-t:i+r.length}function a(){var r={line:n,column:i};return function(e){return e.position=new u(r),v(),e}}function u(r){this.start=r,this.end={line:n,column:i},this.source=e.source}u.prototype.content=r;var o=[];function c(t){var s=new Error(e.source+":"+n+":"+i+": "+t);if(s.reason=t,s.filename=e.source,s.line=n,s.column=i,s.source=r,!e.silent)throw s;o.push(s)}function f(){return p(/^{\s*/)}function m(){return p(/^}/)}function l(){var e,t,n,i=[];for(v(),h(i);r.length&&"}"!=r.charAt(0)&&(e=E()||(t=void 0,t=a(),(n=d())?(h(),t({type:"rule",selectors:n,declarations:w()})):c("selector missing")));)!1!==e&&(i.push(e),h(i));return i}function p(e){var t=e.exec(r);if(t){var n=t[0];return s(n),r=r.slice(n.length),t}}function v(){p(/^\s*/)}function h(r){var e;for(r=r||[];e=g();)!1!==e&&r.push(e);return r}function g(){var e=a();if("/"==r.charAt(0)&&"*"==r.charAt(1)){for(var t=2;""!=r.charAt(t)&&("*"!=r.charAt(t)||"/"!=r.charAt(t+1));)++t;if(""===r.charAt((t+=2)-1))return c("End of comment missing");var n=r.slice(2,t-2);return i+=2,s(n),r=r.slice(t),i+=2,e({type:"comment",comment:n})}}function d(){var r=p(/^([^{]+)/);if(r)return r[0].trim().replace(/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(r){return r.replace(/,/g,"â€Œ")}).split(/\s*(?![^(]*\)),\s*/).map(function(r){return r.replace(/\u200C/g,",")})}function y(){var r=a(),e=p(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(e){if(e=e[0].trim(),!p(/^:\s*/))return c("property missing ':'");var n=p(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),i=r({type:"declaration",property:e.replace(t,""),value:n?n[0].trim().replace(t,""):""});return p(/^[;\s]*/),i}}function w(){var r,e=[];if(!f())return c("missing '{'");for(h(e);r=y();)!1!==r&&(e.push(r),h(e));return m()?e:c("missing '}'")}function k(){for(var r,e=[],t=a();r=p(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)e.push(r[1]),p(/^,\s*/);if(e.length)return t({type:"keyframe",values:e,declarations:w()})}var A=j("import"),V=j("charset"),b=j("namespace");function j(r){var e=new RegExp("^@"+r+"\\s*([^;]+);");return function(){var t=a(),n=p(e);if(n){var i={type:r};return i[r]=n[1].trim(),t(i)}}}function E(){if("@"==r[0])return function(){var r=a();if(e=p(/^@([-\w]+)?keyframes\s*/)){var e,t=e[1];if(!(e=p(/^([-\w]+)\s*/)))return c("@keyframes missing name");var n,i=e[1];if(!f())return c("@keyframes missing '{'");for(var s=h();n=k();)s.push(n),s=s.concat(h());return m()?r({type:"keyframes",name:i,vendor:t,keyframes:s}):c("@keyframes missing '}'")}}()||function(){var r=a(),e=p(/^@media *([^{]+)/);if(e){var t=e[1].trim();if(!f())return c("@media missing '{'");var n=h().concat(l());return m()?r({type:"media",media:t,rules:n}):c("@media missing '}'")}}()||function(){var r=a(),e=p(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(e)return r({type:"custom-media",name:e[1].trim(),media:e[2].trim()})}()||function(){var r=a(),e=p(/^@supports *([^{]+)/);if(e){var t=e[1].trim();if(!f())return c("@supports missing '{'");var n=h().concat(l());return m()?r({type:"supports",supports:t,rules:n}):c("@supports missing '}'")}}()||A()||V()||b()||function(){var r=a(),e=p(/^@([-\w]+)?document *([^{]+)/);if(e){var t=e[1].trim(),n=e[2].trim();if(!f())return c("@document missing '{'");var i=h().concat(l());return m()?r({type:"document",document:n,vendor:t,rules:i}):c("@document missing '}'")}}()||function(){var r=a();if(p(/^@page */)){var e=d()||[];if(!f())return c("@page missing '{'");for(var t,n=h();t=y();)n.push(t),n=n.concat(h());return m()?r({type:"page",selectors:e,declarations:n}):c("@page missing '}'")}}()||function(){var r=a();if(p(/^@host\s*/)){if(!f())return c("@host missing '{'");var e=h().concat(l());return m()?r({type:"host",rules:e}):c("@host missing '}'")}}()||function(){var r=a();if(p(/^@font-face\s*/)){if(!f())return c("@font-face missing '{'");for(var e,t=h();e=y();)t.push(e),t=t.concat(h());return m()?r({type:"font-face",declarations:t}):c("@font-face missing '}'")}}()}return function r(e,t){var n=e&&"string"==typeof e.type,i=n?e:t;for(var s in e){var a=e[s];Array.isArray(a)?a.forEach(function(e){r(e,i)}):a&&"object"==typeof a&&r(a,i)}return n&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}({type:"stylesheet",stylesheet:{rules:l(),parsingErrors:o}})}(c);return o(m.stylesheet.rules,f),n.compile(m)};
//# sourceMappingURL=purifycss.js.map
