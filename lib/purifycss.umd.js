!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("glob")):"function"==typeof define&&define.amd?define(["glob"],e):t.purifyCss=e(t.glob)}(this,function(t){t=t&&t.hasOwnProperty("default")?t.default:t;var e=require("fs"),r=function(r){return Array.isArray(r)?function(t,r){return t.reduce(function(t,r){var n="";try{n=e.readFileSync(r,"utf8").toLowerCase()}catch(t){console.warn(t.message)}return""+t+n+" "},"")}(r=function(n){for(var i={},o=0,s=r;o<s.length;o+=1){var u=s[o];try{e.statSync(u),i[u]=!0}catch(e){t.sync(u).forEach(function(t){i[t]=!0})}}return Object.keys(i)}()):r},n=function(t){if((t=t.replace(/\[(.+?)\]/g,"").toLowerCase()).includes("[")||t.includes("]"))return[];for(var e=!1,r="",n=[],i=0,o=t;i<o.length;i+=1){var s=o[i];e&&!/[ #.]/.test(s)||(/[:*]/.test(s)?(r&&n.push(r),r="",e=!0):/[a-z]/.test(s)?r+=s:(r&&n.push(r),r="",e=!1))}return r&&n.push(r),n},i=function(t,e){this.contentWords=t,this.rejectedSelectors=[],this.wildcardWhitelist=[],this.parseWhitelist(e)};i.prototype.parseWhitelist=function(t){var e=this;t.forEach(function(t){var r;"*"===(r=t=t.toLowerCase())[0]&&"*"===r[r.length-1]?e.wildcardWhitelist.push(t.substr(1,t.length-2)):n(t).forEach(function(t){e.contentWords[t]=!0})})},i.prototype.parseRule=function(t,e){e.selectors=this.filterSelectors(t)},i.prototype.filterSelectors=function(t){var e=this.contentWords,r=this.rejectedSelectors,i=this.wildcardWhitelist,o=[];return t.forEach(function(t){if(function(t,e){for(var r=0,n=i;r<n.length;r+=1)if(t.includes(n[r]))return!0;return!1}(t))o.push(t);else{var s=n(t);s.filter(function(t){return e[t]}).length===s.length?o.push(t):r.push(t)}}),o};var o=/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//g;function s(t){return t?t.replace(/^\s+|\s+$/g,""):""}function u(t){void 0===t&&(t={}),this.options=t}u.prototype.compile=function(t){return this.stylesheet(t)},u.prototype.stylesheet=function(t){return this.mapVisit(t.stylesheet.rules)},u.prototype.mapVisit=function(t){for(var e="",r=0,n=t.length;r<n;r++)e+=this[t[r].type](t[r]);return e},u.prototype.comment=function(){return""},u.prototype.import=function(t){return"@import "+t.import+";"},u.prototype.media=function(t){return"@media "+t.media+"{"+this.mapVisit(t.rules)+"}"},u.prototype.document=function(t){return"@"+(t.vendor||"")+"document "+t.document+"  {"+this.mapVisit(t.rules)+"}"},u.prototype.charset=function(t){return"@charset "+t.charset+";"},u.prototype.namespace=function(t){return"@namespace "+t.namespace+";"},u.prototype.supports=function(t){return"@supports "+t.supports+" {"+this.mapVisit(t.rules)+"}"},u.prototype.keyframes=function(t){return"@"+(t.vendor||"")+"keyframes "+t.name+" {"+this.mapVisit(t.keyframes)+"}"},u.prototype.keyframe=function(t){var e=t.declarations;return t.values.join(", ")+" {"+this.mapVisit(e)+"}"},u.prototype.page=function(t){var e=t.selectors,r=t.declarations;return"@page "+(e.length?e.join(", ")+" ":"")+"{"+this.mapVisit(r)+"}"},u.prototype["font-face"]=function(t){return"@font-face {"+this.mapVisit(t.declarations)+"}"},u.prototype.host=function(t){return"@host {"+this.mapVisit(t.rules)+"}"},u.prototype["custom-media"]=function(t){return"@custom-media "+t.name+" "+t.media+";"},u.prototype.rule=function(t){var e=t.declarations;return e.length?t.selectors.join(",")+"{"+this.mapVisit(e)+"}":""},u.prototype.declaration=function(t){return t.property+": "+t.value+";"},require("fs");var a=function(t,e){for(var r=0,n=t;r<n.length;r+=1){var i=n[r];"rule"===i.type?e.parseRule(i.selectors,i):"media"===i.type&&a(i.rules,e)}},c=function(t){for(var e=[],r=0,n=t;r<n.length;r+=1){var i=n[r],o=i.type;"rule"===o&&0===i.selectors.length?e.push(i):"media"===o&&(c(i.rules),0===i.rules.length&&e.push(i))}e.forEach(function(e){var r=t.indexOf(e);t.splice(r,1)})};return function(t,e,n){void 0===n&&(n={});var f,p=n.whitelist||[],l=r(e),m=r(t).toLowerCase().split(/[^a-z]/g).reduce(function(t,e){return t[e]=!0,t},{html:!0,body:!0}),h=new i(m,p),v=function(t,e){e=e||{};var r=1,n=1;function i(t){var e=t.match(/\n/g);e&&(r+=e.length);var i=t.lastIndexOf("\n");n=~i?t.length-i:n+t.length}function u(){var t={line:r,column:n};return function(e){return e.position=new a(t),v(),e}}function a(t){this.start=t,this.end={line:r,column:n},this.source=e.source}a.prototype.content=t;var c=[];function f(i){var o=new Error(e.source+":"+r+":"+n+": "+i);if(o.reason=i,o.filename=e.source,o.line=r,o.column=n,o.source=t,!e.silent)throw o;c.push(o)}function p(){return h(/^{\s*/)}function l(){return h(/^}/)}function m(){var e,r,n,i=[];for(v(),y(i);t.length&&"}"!=t.charAt(0)&&(e=W()||(r=void 0,r=u(),(n=g())?(y(),r({type:"rule",selectors:n,declarations:b()})):f("selector missing")));)!1!==e&&(i.push(e),y(i));return i}function h(e){var r=e.exec(t);if(r){var n=r[0];return i(n),t=t.slice(n.length),r}}function v(){h(/^\s*/)}function y(t){var e;for(t=t||[];e=d();)!1!==e&&t.push(e);return t}function d(){var e=u();if("/"==t.charAt(0)&&"*"==t.charAt(1)){for(var r=2;""!=t.charAt(r)&&("*"!=t.charAt(r)||"/"!=t.charAt(r+1));)++r;if(""===t.charAt((r+=2)-1))return f("End of comment missing");var o=t.slice(2,r-2);return n+=2,i(o),t=t.slice(r),n+=2,e({type:"comment",comment:o})}}function g(){var t=h(/^([^{]+)/);if(t)return s(t[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(t){return t.replace(/,/g,"â€Œ")}).split(/\s*(?![^(]*\)),\s*/).map(function(t){return t.replace(/\u200C/g,",")})}function w(){var t=u(),e=h(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(e){if(e=s(e[0]),!h(/^:\s*/))return f("property missing ':'");var r=h(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),n=t({type:"declaration",property:e.replace(o,""),value:r?s(r[0]).replace(o,""):""});return h(/^[;\s]*/),n}}function b(){var t,e=[];if(!p())return f("missing '{'");for(y(e);t=w();)!1!==t&&(e.push(t),y(e));return l()?e:f("missing '}'")}function k(){for(var t,e=[],r=u();t=h(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)e.push(t[1]),h(/^,\s*/);if(e.length)return r({type:"keyframe",values:e,declarations:b()})}var A=j("import"),V=j("charset"),E=j("namespace");function j(t){var e=new RegExp("^@"+t+"\\s*([^;]+);");return function(){var r=u(),n=h(e);if(n){var i={type:t};return i[t]=n[1].trim(),r(i)}}}function W(){if("@"==t[0])return function(){var t=u();if(e=h(/^@([-\w]+)?keyframes\s*/)){var e,r=e[1];if(!(e=h(/^([-\w]+)\s*/)))return f("@keyframes missing name");var n,i=e[1];if(!p())return f("@keyframes missing '{'");for(var o=y();n=k();)o.push(n),o=o.concat(y());return l()?t({type:"keyframes",name:i,vendor:r,keyframes:o}):f("@keyframes missing '}'")}}()||function(){var t=u(),e=h(/^@media *([^{]+)/);if(e){var r=s(e[1]);if(!p())return f("@media missing '{'");var n=y().concat(m());return l()?t({type:"media",media:r,rules:n}):f("@media missing '}'")}}()||function(){var t=u(),e=h(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(e)return t({type:"custom-media",name:s(e[1]),media:s(e[2])})}()||function(){var t=u(),e=h(/^@supports *([^{]+)/);if(e){var r=s(e[1]);if(!p())return f("@supports missing '{'");var n=y().concat(m());return l()?t({type:"supports",supports:r,rules:n}):f("@supports missing '}'")}}()||A()||V()||E()||function(){var t=u(),e=h(/^@([-\w]+)?document *([^{]+)/);if(e){var r=s(e[1]),n=s(e[2]);if(!p())return f("@document missing '{'");var i=y().concat(m());return l()?t({type:"document",document:n,vendor:r,rules:i}):f("@document missing '}'")}}()||function(){var t=u();if(h(/^@page */)){var e=g()||[];if(!p())return f("@page missing '{'");for(var r,n=y();r=w();)n.push(r),n=n.concat(y());return l()?t({type:"page",selectors:e,declarations:n}):f("@page missing '}'")}}()||function(){var t=u();if(h(/^@host\s*/)){if(!p())return f("@host missing '{'");var e=y().concat(m());return l()?t({type:"host",rules:e}):f("@host missing '}'")}}()||function(){var t=u();if(h(/^@font-face\s*/)){if(!p())return f("@font-face missing '{'");for(var e,r=y();e=w();)r.push(e),r=r.concat(y());return l()?t({type:"font-face",declarations:r}):f("@font-face missing '}'")}}()}return function t(e,r){var n=e&&"string"==typeof e.type,i=n?e:r;for(var o in e){var s=e[o];Array.isArray(s)?s.forEach(function(e){t(e,i)}):s&&"object"==typeof s&&t(s,i)}return n&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:r||null}),e}({type:"stylesheet",stylesheet:{rules:m(),parsingErrors:c}})}(l);return a(v.stylesheet.rules,h),c(v.stylesheet.rules),f=v,new u(void 0).compile(f)}});
//# sourceMappingURL=purifycss.umd.js.map
